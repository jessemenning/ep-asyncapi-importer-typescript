<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Overview &mdash; Solace Event Portal Async API Importer r0.0.2 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/contentui.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Importer Modes" href="runs.html" />
    <link rel="prev" title="Concepts" href="../concepts.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Solace Event Portal Async API Importer
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../concepts.html">Concepts</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#validation-strategy">Validation Strategy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#parsing-of-api-files">Parsing of Api Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#application-domain-unique-asset-definitions">Application Domain Unique Asset Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#globally-unique-asset-definitions">Globally Unique Asset Definitions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#application-domain">Application Domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="#asset-mapping-naming">Asset Mapping &amp; Naming</a></li>
<li class="toctree-l3"><a class="reference internal" href="#asset-versioning-strategy">Asset Versioning Strategy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#event-api">Event API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#all-other-assets">All Other Assets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#asset-lifecycle-state">Asset Lifecycle State</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="runs.html">Importer Modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="notes.html">Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../apis.html">Async Apis</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Solace Event Portal Async API Importer</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../concepts.html">Concepts</a> &raquo;</li>
      <li>Overview</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/concepts-content/overview.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="overview">
<span id="importer-content-overview"></span><h1>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h1>
<ul class="simple">
<li><p><strong>test &amp; validate</strong> importing Apis in CI/CD pipeline</p></li>
<li><p><strong>import</strong> ready Apis in CI/CD pipeline into released or draft state</p></li>
</ul>
<section id="validation-strategy">
<h2>Validation Strategy<a class="headerlink" href="#validation-strategy" title="Permalink to this heading"></a></h2>
<section id="parsing-of-api-files">
<h3>Parsing of Api Files<a class="headerlink" href="#parsing-of-api-files" title="Permalink to this heading"></a></h3>
<p>Apis are parsed &amp; validated using <a class="reference external" href="https://github.com/asyncapi/parser-js">&#64;asyncapi/parser</a>.</p>
</section>
<section id="application-domain-unique-asset-definitions">
<h3>Application Domain Unique Asset Definitions<a class="headerlink" href="#application-domain-unique-asset-definitions" title="Permalink to this heading"></a></h3>
<p>The importer validates the use of unique asset names, versions and content within the target application domain.</p>
<p>It can detect inconsistent definitions of:</p>
<ul class="simple">
<li><p>channels (topics)</p></li>
<li><p>channel parameters (enums)</p></li>
<li><p>channel message schemas (content)</p></li>
</ul>
</section>
<section id="globally-unique-asset-definitions">
<h3>Globally Unique Asset Definitions<a class="headerlink" href="#globally-unique-asset-definitions" title="Permalink to this heading"></a></h3>
<p>In order to detect inconsistent inconsistencies across all imported Apis across all application domains,
do a release run overriding the application domains defined in the Api.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ep-async-api-importer -fp <span class="s1">&#39;{glob pattern to api file(s)}&#39;</span> -d <span class="o">{</span>application-domain-name<span class="o">}</span>
</pre></div>
</div>
</section>
</section>
<section id="application-domain">
<h2>Application Domain<a class="headerlink" href="#application-domain" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>the application domain is specified in the Api itself using extension: <cite>$.x-ep-application-domain-name</cite></p></li>
<li><p>specifying an application domain on the command line overrides all Api application domains</p></li>
</ul>
</section>
<section id="asset-mapping-naming">
<h2>Asset Mapping &amp; Naming<a class="headerlink" href="#asset-mapping-naming" title="Permalink to this heading"></a></h2>
<p>Assets are identified by their name and mapped as follows:</p>
<table class="colwidths-given docutils align-default" id="id1">
<caption><span class="caption-text">Asset Mapping &amp; Naming</span><a class="headerlink" href="#id1" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Async Api Element</p></th>
<th class="head"><p>Event Portal Asset</p></th>
<th class="head"><p>Naming</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Title</p></td>
<td><p>Event Api / Event Api Version</p></td>
<td><p>event api name = $.info.title</p></td>
</tr>
<tr class="row-odd"><td><p>Version</p></td>
<td><p>Event Api Version</p></td>
<td><p>event api version = $.info.version</p></td>
</tr>
<tr class="row-even"><td><p>Channel</p></td>
<td><p>Event / Event Version</p></td>
<td><p>Event topic = $.channels[n]</p></td>
</tr>
<tr class="row-odd"><td><p>Channel Parameter</p></td>
<td><p>Enum / Enum Version</p></td>
<td><p>Enum name = $.channels[n].parameters[m]</p></td>
</tr>
<tr class="row-even"><td><p>Channel Message</p></td>
<td><p>Schema / Schema Version</p></td>
<td><p>Schema name = $.channels[n].[publish | subscribe].message</p></td>
</tr>
</tbody>
</table>
</section>
<section id="asset-versioning-strategy">
<h2>Asset Versioning Strategy<a class="headerlink" href="#asset-versioning-strategy" title="Permalink to this heading"></a></h2>
<section id="event-api">
<h3>Event API<a class="headerlink" href="#event-api" title="Permalink to this heading"></a></h3>
<p>The version of an Event Api strictly under control of the user - i.e. the version specified in the Api file is exactly the version of the Event Api.</p>
<p>However, in order to complete a run and avoid inconsistencies, the importer will create an Event Api Version with a bumped patch version number and issue a warning.
(scan the log files for <cite>WARN</cite>)</p>
</section>
<section id="all-other-assets">
<h3>All Other Assets<a class="headerlink" href="#all-other-assets" title="Permalink to this heading"></a></h3>
<p><strong>Enums</strong>, <strong>Schemas</strong>, <strong>Events</strong></p>
<p>For each change, a new version is created automatically.
The first version number is based on the Api version number, any further changes use the latest version number of the asset and
bump it according to strategy defined by <cite>CLI_IMPORT_ASSETS_TARGET_VERSION_STRATEGY</cite>.</p>
<p>The latest version is attached to other assets:</p>
<blockquote>
<div><ul class="simple">
<li><p>latest <strong>Enum Version</strong> linked to <strong>Event Version</strong></p></li>
<li><p>latest <strong>Schema Version</strong> linked to <strong>Event Version</strong></p></li>
<li><p>latest <strong>Event Version</strong> linked to <strong>Event Api Version</strong></p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="asset-lifecycle-state">
<h2>Asset Lifecycle State<a class="headerlink" href="#asset-lifecycle-state" title="Permalink to this heading"></a></h2>
<p>The importer supports two asset states: <cite>released</cite> and <cite>draft</cite>.
The asset state is controlled using the environment variable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">CLI_IMPORT_ASSETS_TARGET_LIFECYLE_STATE</span><span class="o">=</span><span class="s2">&quot;released | draft&quot;</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../concepts.html" class="btn btn-neutral float-left" title="Concepts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="runs.html" class="btn btn-neutral float-right" title="Importer Modes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Solace Corporation, Ricardo Gomez-Ulmke, &lt;ricardo.gomez-ulmke@solace.com&gt;.
      <span class="lastupdated">Last updated on 24 Aug 2022 at 07:51.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>